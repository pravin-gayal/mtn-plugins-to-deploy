define(["@grafana/data","@grafana/runtime","@grafana/ui","lodash","react"],((e,t,r,n,o)=>(()=>{"use strict";var a=[e=>{e.exports=o},e=>{e.exports=r},,t=>{t.exports=e},e=>{e.exports=t},e=>{e.exports=n}],i={};function u(e){var t=i[e];if(void 0!==t)return t.exports;var r=i[e]={exports:{}};return a[e](r,r.exports,u),r.exports}u.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return u.d(t,{a:t}),t},u.d=(e,t)=>{for(var r in t)u.o(t,r)&&!u.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{u.r(c),u.d(c,{plugin:()=>A});var e=u(3),t=u(4);function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function n(){return n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},n.apply(this,arguments)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},a(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=f(e);if(t){var o=f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return l(this,r)}}function l(e,t){if(t&&("object"===r(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&a(e,t)}(f,e);var r,u,c,l=i(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),p(s(t=l.call(this,e)),"annotations",{}),p(s(t),"getQueryVariables",(function(){for(var e=window.location.search.substring(1).split("&"),t=new Map,r=0;r<e.length;r++){var n=e[r].split("="),o=decodeURIComponent(n[0]),a=decodeURIComponent(n[1]);t.set(o,a)}return t})),p(s(t),"updateQuery",(function(e){return t.getQueryVariables().forEach((function(t,r){r="$".concat(r),e=e.replace(r,t)})),e})),t}return r=f,(u=[{key:"applyTemplateVariables",value:function(e){e.query=this.updateQuery(e.query);var r=(0,t.getTemplateSrv)();return window.templateSrv=r,e.query=window.templateSrv.replace(e.query,window.templateSrv.getVariables()),n({},e,{templateVars:JSON.stringify(r.getVariables()),urlVars:JSON.stringify(Array.from(this.getQueryVariables().entries()))})}}])&&o(r.prototype,u),c&&o(r,c),Object.defineProperty(r,"prototype",{writable:!1}),f}(t.DataSourceWithBackend),b=u(0),d=u.n(b),h=u(1);function v(e){return v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},v(e)}function g(){return g=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},g.apply(this,arguments)}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function w(e,t){return w=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},w(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=C(e);if(t){var o=C(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return P(this,r)}}function P(e,t){if(t&&("object"===v(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return C=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},C(e)}function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _=h.LegacyForms.SecretFormField,R=h.LegacyForms.FormField,x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&w(e,t)}(a,e);var t,r,n,o=j(a);function a(){var e;m(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return E(S(e=o.call.apply(o,[this].concat(r))),"onHostChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options;n(g({},o,{jsonData:g({},o.jsonData,{host:t.target.value})}))})),E(S(e),"onUserChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options;n(g({},o,{jsonData:g({},o.jsonData,{username:t.target.value})}))})),E(S(e),"onPasswordChange",(function(t){var r=e.props,n=r.onOptionsChange,o=r.options;n(g({},o,{secureJsonData:g({},o.secureJsonData,{password:t.target.value})}))})),E(S(e),"onPasswordReset",(function(){var t=e.props;(0,t.onOptionsChange)(g({},t.options,{secureJsonData:{password:!1}}))})),e}return t=a,(r=[{key:"render",value:function(){var e=this.props.options,t=e.jsonData,r=e.secureJsonFields,n=e.secureJsonData||{};return d().createElement("div",{className:"gf-form-group"},d().createElement("div",{className:"gf-form"},d().createElement(R,{label:"Cluster",labelWidth:10,inputWidth:20,onChange:this.onHostChange,value:t.host||"",placeholder:"Elasticsearch cluster address"})),d().createElement("div",{className:"gf-form"},d().createElement(R,{label:"Username",labelWidth:10,inputWidth:20,onChange:this.onUserChange,value:t.username||"",placeholder:"Elasticsearch cluster username"})),d().createElement("div",{className:"gf-form"},d().createElement(_,{isConfigured:r&&r.password,value:n.password||"",label:"Password",placeholder:"Elasticsearch cluster password",labelWidth:10,inputWidth:20,onReset:this.onPasswordReset,onChange:this.onPasswordChange})))}}])&&O(t.prototype,r),n&&O(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b.PureComponent),D={query:"",url:""},T=u(5);function q(e){return q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},q(e)}function F(){return F=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},F.apply(this,arguments)}function Q(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function V(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function k(e,t){return k=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},k(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=W(e);if(t){var o=W(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return J(this,r)}}function J(e,t){if(t&&("object"===q(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return U(e)}function U(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function N(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,r,n,o=B(a);function a(){var e;Q(this,a);for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return N(U(e=o.call.apply(o,[this].concat(r))),"onUrlChange",(function(t){e.props.onChange(F({},e.props.query,{url:t}))})),N(U(e),"onQueryChange",(function(t){e.props.onChange(F({},e.props.query,{query:t}))})),e}return t=a,(r=[{key:"render",value:function(){var e=(0,T.defaults)(this.props.query,D);return d().createElement(h.FieldSet,null,d().createElement(h.InlineFieldRow,null,d().createElement(h.QueryField,{query:e.url,portalOrigin:"Elasticsearch",onChange:this.onUrlChange}),d().createElement(h.QueryField,{query:e.query,portalOrigin:"Elasticsearch",onChange:this.onQueryChange})))}}])&&V(t.prototype,r),n&&V(t,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(b.PureComponent),A=new e.DataSourcePlugin(y).setConfigEditor(x).setQueryEditor(M)})(),c})()));
//# sourceMappingURL=module.js.map